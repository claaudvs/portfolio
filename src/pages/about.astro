---
import ButtonBack from "../components/ButtonBack.astro";
import { type Datum } from "../data/feed";
import Layout from "../layouts/Layout.astro";
const IG_USER_ID = import.meta.env.INSTAGRAM_ID;
const ACCESS_TOKEN = import.meta.env.INSTAGRAM_KEY;
const url = `https://graph.instagram.com/${IG_USER_ID}/media?fields=id,caption,media_type,media_url,permalink,timestamp,thumbnail_url&access_token=${ACCESS_TOKEN}`;

const res = await fetch(url);
if (!res.ok) {
  console.log(
    new Response(JSON.stringify({ error: "Error al consultar Instagram" }), {
      status: 500,
    }),
  );
}
const data = await res.json();
---

<Layout title="🐈 About — Claudvs">
  <ButtonBack/>
  <!-- <Spotify /> -->
  <main class="mx-auto max-w-2xl px-6 py-16 prose">
    <div class="mb-8">
      <h1 class="text-4xl font-bold my-2">About me</h1>
      <p class="text-lg">
        👨‍💻 Hola, soy Claudio — desarrollador frontend con más de 6 años de
        experiencia creando aplicaciones web en el sector bancario. Me
        especializo en construir interfaces modernas, eficientes y centradas en
        el usuario, usando tecnologías como Angular, Next.js y .NET Core. 🚀 He
        liderado migraciones tecnológicas, optimizado tiempos de carga hasta en
        un 40% y desarrollado dashboards administrativos que realmente aportan
        valor. Me gusta cuidar tanto el rendimiento como los detalles visuales.
        📸 Fuera del código, soy un amante de la fotografía, el dibujo digital
        (iPad siempre a mano), la música 🎧 (rock, electrónica y algo de rap), y
        los viajes por lugares fríos con montañas 🏔. Además, convivo con
        Chester, mi gato naranja 🐱, que siempre está cerca cuando estoy
        trabajando o editando fotos. 🎯 Me motivan los proyectos desafiantes
        donde la tecnología se cruza con la creatividad y genera impacto real.
        Siempre estoy buscando aprender más y compartir con equipos que
        disfruten lo que hacen.
      </p>
    </div>
    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
      {
        data.data.map((image: Datum) => (
          <a href={image.permalink} target="_blank" class="group">
            {image.media_type === "IMAGE" ? (
              <img
                src={image.media_url}
                alt={image.id}
                class="aspect-square w-full rounded-lg bg-gray-200 object-cover group-hover:opacity-75 xl:aspect-7/8"
              />
            ) : (
              <video
                src={image.media_url}
                class="h-auto max-w-full rounded-lg"
              />
            )}
          </a>
        ))
      }
    </div>
  </main>
</Layout>
